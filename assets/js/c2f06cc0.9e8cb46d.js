"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[286],{5787:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>m});var c=t(4848),o=t(8453),l=t(4252);const s={id:"mock-function-api",title:"Mock Functions"},a=void 0,i={id:"mock-function-api",title:"Mock Functions",description:'Mock functions are also known as "spies", because they let you spy on the behavior of a function that is a direct (or indirect) collaborator of the module you\'re trying to test, rather than only testing the output. You can create a mock function with jest.fn(). If no implementation is given, the mock function will return nil when invoked.',source:"@site/docs/MockFunctionAPI.md",sourceDirName:".",slug:"/mock-function-api",permalink:"/jest-lua/mock-function-api",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"mock-function-api",title:"Mock Functions"},sidebar:"api",previous:{title:"Expect",permalink:"/jest-lua/expect"},next:{title:"The Jest Object",permalink:"/jest-lua/jest-object"}},r={},m=[{value:"Methods",id:"methods",level:2},{value:"Reference",id:"reference",level:2},{value:"<code>mockFn.getMockName()</code>",id:"mockfngetmockname",level:3},{value:"<code>mockFn.mock.calls</code>",id:"mockfnmockcalls",level:3},{value:"<code>mockFn.mock.results</code>",id:"mockfnmockresults",level:3},{value:"<code>mockFn.mock.instances</code>",id:"mockfnmockinstances",level:3},{value:"<code>mockFn.mock.lastCall</code>",id:"mockfnmocklastcall",level:3},{value:"<code>mockFn.mockClear()</code>",id:"mockfnmockclear",level:3},{value:"<code>mockFn.mockReset()</code>",id:"mockfnmockreset",level:3},{value:"<code>mockFn.mockImplementation(fn)</code>",id:"mockfnmockimplementationfn",level:3},{value:"<code>mockFn.mockImplementationOnce(fn)</code>",id:"mockfnmockimplementationoncefn",level:3},{value:"<code>mockFn.mockName(value)</code>",id:"mockfnmocknamevalue",level:3},{value:"<code>mockFn.mockReturnThis()</code>",id:"mockfnmockreturnthis",level:3},{value:"<code>mockFn.mockReturnValue(value)</code>",id:"mockfnmockreturnvaluevalue",level:3},{value:"<code>mockFn.mockReturnValueOnce(value)</code>",id:"mockfnmockreturnvalueoncevalue",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})})}),"\n",(0,c.jsxs)(n.p,{children:['Mock functions are also known as "spies", because they let you spy on the behavior of a function that is a direct (or indirect) collaborator of the module you\'re trying to test, rather than only testing the output. You can create a mock function with ',(0,c.jsx)(n.code,{children:"jest.fn()"}),". If no implementation is given, the mock function will return ",(0,c.jsx)(n.code,{children:"nil"})," when invoked."]}),"\n",(0,c.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n","\n","\n",(0,c.jsx)(l.A,{toc:m.filter((e=>3===e.level))}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,c.jsx)(n.h3,{id:"mockfngetmockname",children:(0,c.jsx)(n.code,{children:"mockFn.getMockName()"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfngetmockname",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsxs)(n.p,{children:["Returns the mock name string set by calling ",(0,c.jsx)(n.code,{children:"mockFn.mockName(value)"}),"."]}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockcalls",children:(0,c.jsx)(n.code,{children:"mockFn.mock.calls"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockcalls",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsx)(n.p,{children:"An array containing the call arguments of all calls that have been made to this mock function. Each item in the array is an array of arguments that were passed during the call."}),"\n",(0,c.jsxs)(n.p,{children:["For example: A mock function ",(0,c.jsx)(n.code,{children:"f"})," that has been called twice, with the arguments ",(0,c.jsx)(n.code,{children:"f('arg1', 'arg2')"}),", and then with the arguments ",(0,c.jsx)(n.code,{children:"f('arg3', 'arg4')"}),", would have a ",(0,c.jsx)(n.code,{children:"mock.calls"})," array that looks like this:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"{\n\t{'arg1', 'arg2'},\n\t{'arg3', 'arg4'},\n}\n"})}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockresults",children:(0,c.jsx)(n.code,{children:"mockFn.mock.results"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockresults",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Deviation",src:"img/deviation.svg"}),"\n",(0,c.jsxs)(n.p,{children:["An array containing the results of all calls that have been made to this mock function. Each entry in this array is an object containing a ",(0,c.jsx)(n.code,{children:"type"})," property, and a ",(0,c.jsx)(n.code,{children:"value"})," property. ",(0,c.jsx)(n.code,{children:"type"})," will be one of the following:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"'return'"})," - Indicates that the call completed by returning normally."]}),"\n"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"'incomplete'"})," - Indicates that the call has not yet completed. This occurs if you test the result from within the mock function itself, or from within a function that was called by the mock."]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"value"})," property contains the value that was thrown or returned. ",(0,c.jsx)(n.code,{children:"value"})," is nil when ",(0,c.jsx)(n.code,{children:"type == 'incomplete'"}),"."]}),"\n",(0,c.jsxs)(n.p,{children:["For example: A mock function ",(0,c.jsx)(n.code,{children:"f"})," that has been called two times, returning ",(0,c.jsx)(n.code,{children:"'result1'"}),", and then returning ",(0,c.jsx)(n.code,{children:"'result2'"}),", would have a ",(0,c.jsx)(n.code,{children:"mock.results"})," array that looks like this:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"{\n\t{\n\t\ttype = 'return',\n\t\tvalue = 'result1',\n\t},\n\t{\n\t\ttype = 'return',\n\t\tvalue = 'result2',\n\t},\n}\n"})}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockinstances",children:(0,c.jsx)(n.code,{children:"mockFn.mock.instances"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockinstances",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsx)(n.p,{children:"An array that contains all the object instances that have been instantiated from this mock function."}),"\n",(0,c.jsxs)(n.p,{children:["For example: A mock function that has been instantiated twice would have the following ",(0,c.jsx)(n.code,{children:"mock.instances"})," array:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"local mockFn = jest.fn()\n\nlocal a = mockFn.new()\nlocal b = mockFn.new()\n\nmockFn.mock.instances[1] == a\nmockFn.mock.instances[2] == b\n"})}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmocklastcall",children:(0,c.jsx)(n.code,{children:"mockFn.mock.lastCall"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmocklastcall",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsxs)(n.p,{children:["An array containing the call arguments of the last call that was made to this mock function. If the function was not called, it will return ",(0,c.jsx)(n.code,{children:"nil"}),"."]}),"\n",(0,c.jsxs)(n.p,{children:["For example: A mock function ",(0,c.jsx)(n.code,{children:"f"})," that has been called twice, with the arguments ",(0,c.jsx)(n.code,{children:"f('arg1', 'arg2')"}),", and then with the arguments ",(0,c.jsx)(n.code,{children:"f('arg3', 'arg4')"}),", would have a ",(0,c.jsx)(n.code,{children:"mock.lastCall"})," array that looks like this:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"{'arg3', 'arg4'}\n"})}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockclear",children:(0,c.jsx)(n.code,{children:"mockFn.mockClear()"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmocklastcall",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsxs)(n.p,{children:["Clears all information stored in the ",(0,c.jsx)(n.a,{href:"#mockfnmockcalls",children:(0,c.jsx)(n.code,{children:"mockFn.mock.calls"})}),", ",(0,c.jsx)(n.a,{href:"#mockfnmockinstances",children:(0,c.jsx)(n.code,{children:"mockFn.mock.instances"})})," and ",(0,c.jsx)(n.a,{href:"#mockfnmockresults",children:(0,c.jsx)(n.code,{children:"mockFn.mock.results"})})," arrays. Often this is useful when you want to clean up a mocks usage data between two assertions."]}),"\n",(0,c.jsxs)(n.p,{children:["Beware that ",(0,c.jsx)(n.code,{children:"mockClear"})," will replace ",(0,c.jsx)(n.code,{children:"mockFn.mock"}),", not just these three properties! You should, therefore, avoid assigning ",(0,c.jsx)(n.code,{children:"mockFn.mock"})," to other variables, temporary or not, to make sure you don't access stale data."]}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.a,{href:"configuration#clearmocks-boolean",children:(0,c.jsx)(n.code,{children:"clearMocks"})})," configuration option is available to clear mocks automatically before each tests."]}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockreset",children:(0,c.jsx)(n.code,{children:"mockFn.mockReset()"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockreset",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsxs)(n.p,{children:["Does everything that ",(0,c.jsx)(n.a,{href:"#mockfnmockclear",children:(0,c.jsx)(n.code,{children:"mockFn.mockClear()"})})," does, and also removes any mocked return values or implementations."]}),"\n",(0,c.jsxs)(n.p,{children:["This is useful when you want to completely reset a ",(0,c.jsx)(n.em,{children:"mock"})," back to its initial state. (Note that resetting a ",(0,c.jsx)(n.em,{children:"spy"})," will result in a function with no return value)."]}),"\n",(0,c.jsxs)(n.p,{children:["Beware that ",(0,c.jsx)(n.code,{children:"mockReset"})," will replace ",(0,c.jsx)(n.code,{children:"mockFn.mock"}),", not just ",(0,c.jsx)(n.a,{href:"#mockfnmockcalls",children:(0,c.jsx)(n.code,{children:"mockFn.mock.calls"})})," and ",(0,c.jsx)(n.a,{href:"#mockfnmockinstances",children:(0,c.jsx)(n.code,{children:"mockFn.mock.instances"})}),". You should, therefore, avoid assigning ",(0,c.jsx)(n.code,{children:"mockFn.mock"})," to other variables, temporary or not, to make sure you don't access stale data."]}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.a,{href:"configuration#resetmocks-boolean",children:(0,c.jsx)(n.code,{children:"mockReset"})})," configuration option is available to reset mocks automatically before each test."]}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockimplementationfn",children:(0,c.jsx)(n.code,{children:"mockFn.mockImplementation(fn)"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockimplementationfn",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Deviation",src:"img/deviation.svg"}),"\n",(0,c.jsx)(n.p,{children:"Accepts a function that should be used as the implementation of the mock. The mock itself will still record all calls that go into and instances that come from itself \u2013 the only difference is that the implementation will also be executed when the mock is called."}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.em,{children:["Note: ",(0,c.jsx)(n.code,{children:"jest.fn(implementation)"})," is a shorthand for ",(0,c.jsx)(n.code,{children:"jest.fn().mockImplementation(implementation)"}),"."]})}),"\n",(0,c.jsx)(n.p,{children:"For example:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"local mockFn = jest.fn().mockImplementation(function(scalar) return 42 + scalar end)\n-- or: jest.fn(function(scalar) return 42 + scalar end)\n\nlocal a = mockFn(0)\nlocal b = mockFn(1)\n\na == 42 == true\nb == 43 == true\n\nmockFn.mock.calls[1][1] == 0 -- true\nmockFn.mock.calls[2][1] == 1 -- true\n"})}),"\n",(0,c.jsx)(n.admonition,{type:"caution",children:(0,c.jsxs)(n.p,{children:["Mocks should be lightweight and easy to maintain and/or refactor, so users should favor ",(0,c.jsx)(n.code,{children:"mockReturnValue"})," over ",(0,c.jsx)(n.code,{children:"mockImplementation"})," or ",(0,c.jsx)(n.code,{children:"mockImplementationOnce"})," instead where possible."]})}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockimplementationoncefn",children:(0,c.jsx)(n.code,{children:"mockFn.mockImplementationOnce(fn)"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockimplementationoncefn",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsx)(n.p,{children:"Accepts a function that will be used as an implementation of the mock for one call to the mocked function. Can be chained so that multiple function calls produce different results."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"local myMockFn = jest.fn()\n\t.mockImplementationOnce(function(cb) return cb(nil, true) end)\n\t.mockImplementationOnce(function(cb) return cb(nil, false) end)\n\nmyMockFn(function(err, val) print(val) end) -- true\nmyMockFn(function(err, val) print(val) end) -- false\n"})}),"\n",(0,c.jsxs)(n.p,{children:["When the mocked function runs out of implementations defined with mockImplementationOnce, it will execute the default implementation set with ",(0,c.jsx)(n.code,{children:"jest.fn(function() return defaultValue end)"})," or ",(0,c.jsx)(n.code,{children:".mockImplementation(function() return defaultValue end)"})," if they were called:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"local myMockFn = jest.fn(function() return 'default' end)\n\t.mockImplementationOnce(function() return 'first call' end)\n\t.mockImplementationOnce(function() return 'second call' end)\n\nprint(myMockFn()) -- 'first call'\nprint(myMockFn()) -- 'second call'\nprint(myMockFn()) -- 'default'\nprint(myMockFn()) -- 'default\n"})}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmocknamevalue",children:(0,c.jsx)(n.code,{children:"mockFn.mockName(value)"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmocknamevalue",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsx)(n.p,{children:'Accepts a string to use in test result output in place of "jest.fn()" to indicate which mock function is being referenced.'}),"\n",(0,c.jsx)(n.p,{children:"For example:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"local mockFn = jest.fn().mockName('mockedFunction')\n-- mockFn()\nexpect(mockFn).toHaveBeenCalled()\n"})}),"\n",(0,c.jsx)(n.p,{children:"Will result in this error:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"expect(mockedFunction).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n"})}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockreturnthis",children:(0,c.jsx)(n.code,{children:"mockFn.mockReturnThis()"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockreturnthis",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsxs)(n.p,{children:["Sets the implementation of ",(0,c.jsx)(n.code,{children:"mockFn"})," to return itself whenenever the mock function is called."]}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockreturnvaluevalue",children:(0,c.jsx)(n.code,{children:"mockFn.mockReturnValue(value)"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockreturnvaluevalue",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsx)(n.p,{children:"Accepts a value that will be returned whenever the mock function is called."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"local mock = jest.fn()\nmock.mockReturnValue(42)\nmock() -- 42\nmock.mockReturnValue(43)\nmock() -- 43\n"})}),"\n",(0,c.jsx)(n.h3,{id:"mockfnmockreturnvalueoncevalue",children:(0,c.jsx)(n.code,{children:"mockFn.mockReturnValueOnce(value)"})}),"\n",(0,c.jsx)("a",{href:"https://jestjs.io/docs/27.x/mock-function-api#mockfnmockreturnvalueoncevalue",target:"_blank",children:(0,c.jsx)("img",{alt:"Jest",src:"img/jestjs.svg"})}),"\n",(0,c.jsx)("img",{alt:"Aligned",src:"img/aligned.svg"}),"\n",(0,c.jsxs)(n.p,{children:["Accepts a value that will be returned for one call to the mock function. Can be chained so that successive calls to the mock function return different values. When there are no more ",(0,c.jsx)(n.code,{children:"mockReturnValueOnce"})," values to use, calls will return a value specified by ",(0,c.jsx)(n.code,{children:"mockReturnValue"}),"."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-lua",children:"local myMockFn = jest.fn()\n\t.mockReturnValue('default')\n\t.mockReturnValueOnce('first call')\n\t.mockReturnValueOnce('second call')\n\nprint(myMockFn()) -- > 'first call'\nprint(myMockFn()) -- > 'second call'\nprint(myMockFn()) -- > 'default'\nprint(myMockFn()) -- > 'default\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},4252:(e,n,t)=>{t.d(n,{A:()=>s});t(6540);var c=t(5195);const o={tableOfContentsInline:"tableOfContentsInline_prmo"};var l=t(4848);function s(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:s}=e;return(0,l.jsx)("div",{className:o.tableOfContentsInline,children:(0,l.jsx)(c.A,{toc:n,minHeadingLevel:t,maxHeadingLevel:s,className:"table-of-contents",linkClassName:null})})}},5195:(e,n,t)=>{t.d(n,{A:()=>f});var c=t(6540),o=t(6342);function l(e){const n=e.map((e=>({...e,parentIndex:-1,children:[]}))),t=Array(7).fill(-1);n.forEach(((e,n)=>{const c=t.slice(2,e.level);e.parentIndex=Math.max(...c),t[e.level]=n}));const c=[];return n.forEach((e=>{const{parentIndex:t,...o}=e;t>=0?n[t].children.push(o):c.push(o)})),c}function s(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:c}=e;return n.flatMap((e=>{const n=s({toc:e.children,minHeadingLevel:t,maxHeadingLevel:c});return function(e){return e.level>=t&&e.level<=c}(e)?[{...e,children:n}]:n}))}function a(e){const n=e.getBoundingClientRect();return n.top===n.bottom?a(e.parentNode):n}function i(e,n){let{anchorTopOffset:t}=n;const c=e.find((e=>a(e).top>=t));if(c){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(a(c))?c:e[e.indexOf(c)-1]??null}return e[e.length-1]??null}function r(){const e=(0,c.useRef)(0),{navbar:{hideOnScroll:n}}=(0,o.p)();return(0,c.useEffect)((()=>{e.current=n?0:document.querySelector(".navbar").clientHeight}),[n]),e}function m(e){const n=(0,c.useRef)(void 0),t=r();(0,c.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:c,linkActiveClassName:o,minHeadingLevel:l,maxHeadingLevel:s}=e;function a(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(c),a=function(e){let{minHeadingLevel:n,maxHeadingLevel:t}=e;const c=[];for(let o=n;o<=t;o+=1)c.push(`h${o}.anchor`);return Array.from(document.querySelectorAll(c.join()))}({minHeadingLevel:l,maxHeadingLevel:s}),r=i(a,{anchorTopOffset:t.current}),m=e.find((e=>r&&r.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,t){t?(n.current&&n.current!==e&&n.current.classList.remove(o),e.classList.add(o),n.current=e):e.classList.remove(o)}(e,e===m)}))}return document.addEventListener("scroll",a),document.addEventListener("resize",a),a(),()=>{document.removeEventListener("scroll",a),document.removeEventListener("resize",a)}}),[e,t])}var d=t(8774),h=t(4848);function u(e){let{toc:n,className:t,linkClassName:c,isChild:o}=e;return n.length?(0,h.jsx)("ul",{className:o?void 0:t,children:n.map((e=>(0,h.jsxs)("li",{children:[(0,h.jsx)(d.A,{to:`#${e.id}`,className:c??void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,h.jsx)(u,{isChild:!0,toc:e.children,className:t,linkClassName:c})]},e.id)))}):null}const k=c.memo(u);function f(e){let{toc:n,className:t="table-of-contents table-of-contents__left-border",linkClassName:a="table-of-contents__link",linkActiveClassName:i,minHeadingLevel:r,maxHeadingLevel:d,...u}=e;const f=(0,o.p)(),j=r??f.tableOfContents.minHeadingLevel,x=d??f.tableOfContents.maxHeadingLevel,g=function(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:o}=e;return(0,c.useMemo)((()=>s({toc:l(n),minHeadingLevel:t,maxHeadingLevel:o})),[n,t,o])}({toc:n,minHeadingLevel:j,maxHeadingLevel:x});return m((0,c.useMemo)((()=>{if(a&&i)return{linkClassName:a,linkActiveClassName:i,minHeadingLevel:j,maxHeadingLevel:x}}),[a,i,j,x])),(0,h.jsx)(k,{toc:g,className:t,linkClassName:a,...u})}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var c=t(6540);const o={},l=c.createContext(o);function s(e){const n=c.useContext(l);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),c.createElement(l.Provider,{value:n},e.children)}}}]);